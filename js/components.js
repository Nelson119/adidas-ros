"use strict";app.partial.home=function(){$("#container").on("page:update:home",function(e,t){function a(e){anime({targets:"html,body",easing:"easeInOutExpo",scrollTop:e.offset().top,delay:1200,complete:function(){$("#content").trigger("rolling"),e.hasClass("lin")?history.pushState(null,document.title,location.search+"#Jeremy Lin"):e.hasClass("chen")?history.pushState(null,document.title,location.search+"#Wei-Yin Chen"):e.hasClass("lu")?history.pushState(null,document.title,location.search+"#Rendy Lu"):history.pushState(null,document.title,"./"+location.search)}})}$(".parallax").each(function(e,t){new Parallax(t)});$("#content").on("resizeend",500,function(e){e.stopPropagation(),e.preventDefault(),$(window).width()>800?$(".home article aside.text").mCustomScrollbar({autoDraggerLength:!1}):($(".home article aside.text").mCustomScrollbar("destroy"),$(".home article aside.text").mCustomScrollbar("destroy"))});var n={},i=null,o=0;$(".kv, article.lin, article.chen, article.lu").each(function(e){var t="Section"+Math.floor(new Date*Math.random());$(this).attr("id",t);n[t]={},n[t].ele=this,n[t].top=function(){return $(this.ele).offset().top},n[t].butt=function(){return $(this.ele).offset().top+$(this.ele).outerHeight()},n[t].middle=function(){return $(this.ele).offset().top+$(this.ele).outerHeight()/2}}),$("#content").on("rolling",function(e){var t=$(window).scrollTop()+$(window).height()/20,a=$(window).scrollTop()+$(window).height()/20*19;$(".kv, article.lin, article.chen, article.lu").each(function(e,s){var l=$(this).attr("id"),r=n[l];r.middle()>=t&&r.middle()<=a&&i!=l&&(i=l),i&&!$("#"+i).hasClass("active")&&($("#"+i).addClass("active").trigger("section:active").siblings().removeClass("active"),$("#"+i).hasClass("lin")?history.pushState(null,document.title,location.search+"#Jeremy Lin"):$("#"+i).hasClass("chen")?history.pushState(null,document.title,location.search+"#Wei-Yin Chen"):$("#"+i).hasClass("lu")?history.pushState(null,document.title,location.search+"#Rendy Lu"):history.pushState(null,document.title,"./"+location.search)),o=t})}),/jeremy(\s|[%]20)lin/i.test(location.hash)?($("article.lin").addClass("active").siblings().removeClass("active"),a($("article.lin"))):/wei[-]yin(\s|[%]20)chen/i.test(location.hash)?($("article.chen").addClass("active").siblings().removeClass("active"),a($("article.chen"))):/rendy(\s|[%]20)lu/i.test(location.hash)?($("article.lu").addClass("active").siblings().removeClass("active"),a($("article.lu"))):$(window).width()>800&&anime({targets:"html,body",easing:"easeInOutExpo",scrollTop:0,delay:50})}),$("#content.home").length&&$("#container").trigger("page:update:home",null)},app.partial.form=function(){var e=$("#container"),t="https://tw2.klear.ly/2017/adidas-ros/api.php";/www\.adidas-campaign\.com\.tw/gi.test(location.href)&&(t="http://www.adidas-campaign.com.tw/heretocreate/event/api.php"),e.on("page:update:form",function(e,a){$("#content").on("resizeend",500,function(e){e.stopPropagation(),e.preventDefault(),$(window).width()>800?($(".bfh-datepicker").removeClass("hide"),$(".bfh-datepicker .input-group").append($("[name=age]").attr("type","text")),$(".bfh-datepicker").bfhdatepicker($(".bfh-datepicker").data())):$("[name=age]").attr("type","date").removeAttr("readonly").insertAfter($(".bfh-datepicker").addClass("hide"));$(window).width();var t=$(window).height();anime({targets:"background, #content",height:function(){return t},duration:800,easing:"easeInOutExpo"}),$(window).width()>800?$(".form article .text").mCustomScrollbar({autoDraggerLength:!1}):$(".form article .text").mCustomScrollbar("destroy")}),$.ajax({url:t+"?session_avail"}).promise().done(function(e){e.success&&$.each(e.data,function(e,t){0==t.vacancy&&$("#session"+t.no).attr("disabled","disabled")})}).catch(function(e){$.ajax({url:"../vacancy.json"}).promise().done(function(e){e.success&&$.each(e.data,function(e,t){0==t.vacancy&&$("#session"+t.no).attr("disabled","disabled"),1*new Date>=1*new Date("2017-7-14 12:00")&&$("#session1, #session2").attr("disabled","disabled"),1*new Date>=1*new Date("2017-7-19 23:59")&&$("#session3, #session4, #session5, #session6").attr("disabled","disabled")})}).catch(function(e){console.log(e)})}),$("form").on("submit",function(e){e.stopPropagation(),e.preventDefault();var a={age:JSON.stringify(new Date($("[name=age]").val().replace(/[-]/g,"/"))).replace(/["]/g,""),email:$("[name=email]").val(),tel:$("[name=tel]").val(),name:$("[name=name]").val(),session:$("[name=session]:checked").val()};return $("[name=agree]:checked").length?a.email?a.tel?a.name?a.session?void $.ajax({method:"post",url:t+"?submit",data:a}).promise().catch(function(e){console.log(e)}).done(function(e){1==e.success?(alert("感謝您的報名與熱烈支持，我們會立即為您處理！報名成功會以簡訊通知，收到簡訊後才算成功完成報名。"),location.href=app.utility.rootPath+"#Jeremy Lin"):alert(e.msg.replace("抱歉，僅開放有限的年齡層參與","請確認您符合報名資格。"))}):(alert("請選擇一個場次"),!1):(alert("請填寫姓名"),!1):(alert("請填寫手機號碼"),!1):(alert("請填寫Email"),!1):(alert("請勾選確認詳閱並同意個資法與活動辦法"),!1)})}),$("#content.form").length&&$("#container").trigger("page:update:form",null)},app.partial.rule=function(){$("#container").on("page:update:rule",function(e,t){$("#content").on("resizeend",500,function(e){e.stopPropagation(),e.preventDefault();$(window).width();var t=$(window).height();anime({targets:"background, #content",height:function(){return t},duration:800,easing:"easeInOutExpo"}),$(window).width()>800?$(".rule article .text").mCustomScrollbar({autoDraggerLength:!1}):$(".rule article .text").mCustomScrollbar("destroy")})}),$("#content.rule").length&&$("#container").trigger("page:update:rule",null)};